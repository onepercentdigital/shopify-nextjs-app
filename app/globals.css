@import "tailwindcss";

@plugin "@tailwindcss/container-queries";
@plugin "@tailwindcss/typography";

/* FIX: Prevent layout shift when scrollbar appears/disappears */
html {
  scrollbar-gutter: stable;
}

/* Fallback for browsers that don't support scrollbar-gutter */
@supports not (scrollbar-gutter: stable) {
  html {
    overflow-y: scroll;
  }
}

@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentColor);
  }
}

@media (prefers-color-scheme: dark) {
  html {
    color-scheme: dark;
  }
}

/*
  Safari < 16.4 lazy loading bug workaround removed
  The white border bug on lazy-loaded images was fixed in Safari 16.4 (March 2023)
  If you need to support older Safari versions, you can add back:
  @supports (font: -apple-system-body) and (-webkit-appearance: none) {
    img[loading="lazy"] { clip-path: inset(0.6px); }
  }
*/

a,
input,
button {
  @apply focus-visible:ring-2 focus-visible:ring-neutral-400 focus-visible:ring-offset-2 focus-visible:ring-offset-neutral-50 focus-visible:outline-hidden dark:focus-visible:ring-neutral-600 dark:focus-visible:ring-offset-neutral-900;
}

/* === Custom animations migrated from Tailwind v3 config === */
@theme {
  @keyframes fadeIn {
    0% {
      opacity: 0;
    }
    100% {
      opacity: 1;
    }
  }

  @keyframes marquee {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-100%);
    }
  }

  @keyframes blink {
    0% {
      opacity: 0.2;
    }
    20% {
      opacity: 1;
    }
    100% {
      opacity: 0.2;
    }
  }

  @keyframes pulse {
    50% {
      opacity: 0.5;
    }
  }

  @keyframes shimmer {
    100% {
      transform: translateX(100%);
    }
  }
}

/* Utility classes must be defined outside @theme */
.animate-fadeIn {
  animation: fadeIn 0.3s ease-in-out;
}

.animate-carousel {
  animation: marquee 60s linear infinite;
}

.animate-blink {
  animation: blink 1.4s infinite both;
}

.animate-pulse {
  animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.animate-shimmer {
  animation: shimmer 2s infinite;
}
